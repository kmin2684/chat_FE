{"version":3,"sources":["others/shared_functions.js","components/Spinner/Spinner.jsx","store/userInfo-slice.js","others/shared_vars.js","components/Login/Login.jsx","components/Registration/Registration.jsx","icons/x-lg.svg","icons/info.svg","store/status-slice.js","components/Friend/Friend.jsx","components/ChatWindowModal/ChatWindowModal.jsx","components/ChatWindow/ChatWindow.jsx","icons/group-icon.svg","icons/arrow-left.svg","components/NewChat/NewChat.jsx","components/AddFriend/AddFriend.jsx","components/Chat/Chat.jsx","components/ChatPeopleList/ChatPeopleList.jsx","icons/chat-fill.svg","icons/people-fill.svg","components/ChatPeopleToggle/ChatPeopleToggle.jsx","icons/log-out.svg","icons/pencil-fill.svg","icons/person-plus-fill.svg","components/Main/Main.jsx","store/index.js","App.js","store/userInfo-actions.js","reportWebVitals.js","index.js"],"names":["StringToColor","string","sum","charCodeAt","MobileViewSide","viewSide","show","hide","console","log","sideDisplayed","document","querySelector","originalClassList","classList","value","split","filter","e","trim","length","uniqueClassList","Set","modifiedClassList","remove","add","sideHidden","SaveUserInfo","userInfo","Storage","localStorage","ChatUserInfo","JSON","stringify","QueryStringGenerator","section","members","groupName","friends","query","URLSearchParams","append","forEach","member","includes","toString","className","role","userInfoSlice","createSlice","name","initialState","username","token","isLoading","reducers","setUserInfo","state","action","payload","setIsLoading","increment","counter","decrement","increase","toggleCounter","showCounter","userInfoActions","actions","http_url","Login","loggedIn","history","useHistory","dispatch","useDispatch","useState","setUsername","password","setPassword","onChange","event","type","target","VisitorSignIn","undefined","fetch","method","headers","body","then","response","json","data","non_field_errors","to","onSubmit","preventDefault","TextField","id","placeholder","Button","variant","onClick","push","Spinner","Registration","SetUserInfoProp","password2","setPassword2","keys","Object","find","key","error","statusSlice","chats","currentChat","chatHistory","setChats","addChat","setFriends","addFriend","setCurrentChat","setChatHistory","statusActions","Friend","friend","onClickFriend","checked","changeCheck","isFriend","style","backgroundColor","disabled","useStyles","makeStyles","topScrollPaper","alignItems","ChatWindowModal","prop","useSelector","status","Dialog","open","modalOpen","onClose","setModalOpenProp","container","position","BackdropProps","componentsProps","padding","DialogTitle","map","ChatWindow","inputOn","socket","newChatData","mobileViewSide","room_id","useParams","chatTitle","setChatTitle","content","setContent","scroll","useRef","setDisabled","setModalOpen","useEffect","current","scrollTop","scrollHeight","displayedChat","chat","GetChatTitle","newChatMembers","Intl","DateTimeFormat","resolvedOptions","timeZone","messages","message","sender","datetime","time","src","xIcon","infoIcon","ref","url","send","sendMessage","autoComplete","autoFocus","NewChat","sections","location","useLocation","queryParams","search","queryParamsSection","get","queryParamsMembers","getAll","queryParamsGroupName","setSection","setGroupName","checkedUsers","setCheckedUsers","setInputOn","newChat","setNewChatData","user","new_message","groupIcon","add_participants","arrowLeftIcon","concat","add_title","JumpToSendMessage","required","send_message","page","AddFriend","setQuery","suggestions","setSuggestions","new_suggestion","ok","suggestion","searchResult","Chat","path","chatName","otherMembers","slice","ChatPeopleList","showChat","setChatHistoryProp","rooms","ChatPeopleToggle","ChatPeopleSwitch","chat_fill","people_fill","Main","setShowChat","profilePage","ProfileOn","a","window","reload","catch","logoutIcon","profile","display","personPlusIcon","pencilIcon","store","configureStore","reducer","App","setSocket","chat_id","W3CWebSocket","ws_url","close","fetchData","storedInfo","Authorization","Error","parse","userData","getState","authorization","replace","onopen","onmessage","room","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ff26b09a.chunk.js","sourcesContent":["function convertTZ(date, tzString) {\r\n  return new Date(\r\n    (typeof date === \"string\" ? new Date(date) : date).toLocaleString(\"en-US\", {\r\n      timeZone: tzString,\r\n    })\r\n  );\r\n}\r\n\r\nexport function StringToColor(string) {\r\n  let colorMap = {\r\n    0: \"#313E50\",\r\n    1: \"#924C5D\",\r\n    2: \"#C5867A\",\r\n    3: \"#E1915E\",\r\n    4: \"#E17F5E\",\r\n    5: \"#85A47A\",\r\n  };\r\n\r\n  let sum = 0;\r\n  for (let char of string) {\r\n    sum += char.charCodeAt(0);\r\n  }\r\n\r\n  return colorMap[sum % 6];\r\n}\r\n\r\nexport function MobileViewSide(viewSide) {\r\n  let show;\r\n  let hide;\r\n  if (viewSide === \"left\") {\r\n    show = \"left\";\r\n    hide = \"right\";\r\n  } else if (viewSide === \"right\") {\r\n    show = \"right\";\r\n    hide = \"left\";\r\n  } else {\r\n    console.log(\"invalide viewSide for MobileViewSide function\");\r\n    return;\r\n  }\r\n  // add className of \"ShowIfMobile\" to the element that will be displayed\r\n  let sideDisplayed = document.querySelector(`.${show}`);\r\n  let originalClassList = sideDisplayed.classList.value\r\n    .split(/(\\s+)/)\r\n    .filter(function (e) {\r\n      return e.trim().length > 0;\r\n    });\r\n  let uniqueClassList = [...new Set(originalClassList)];\r\n  let modifiedClassList = uniqueClassList.filter(\r\n    (e) => !(e === \"HideIfMobile\" || e === \"ShowIfMobile\")\r\n  );\r\n  sideDisplayed.classList.remove(...originalClassList);\r\n  sideDisplayed.classList.add(...[...modifiedClassList, \"ShowIfMobile\"]);\r\n\r\n  // add className of \"HideIfMobile\" to the element that will be displayed\r\n  let sideHidden = document.querySelector(`.${hide}`);\r\n  if (!sideHidden) {\r\n    console.log(\"no side to hide\");\r\n    return;\r\n  }\r\n  console.log(\"side hidden\", sideHidden);\r\n  originalClassList = sideHidden?.classList?.value\r\n    ?.split(/(\\s+)/)\r\n    .filter(function (e) {\r\n      return e.trim().length > 0;\r\n    });\r\n  uniqueClassList = [...new Set(originalClassList)];\r\n  modifiedClassList = uniqueClassList.filter(\r\n    (e) => !(e === \"HideIfMobile\" || e === \"ShowIfMobile\")\r\n  );\r\n  sideHidden.classList.remove(...originalClassList);\r\n  sideHidden.classList.add(...[...modifiedClassList, \"HideIfMobile\"]);\r\n  return;\r\n}\r\n\r\nexport function SaveUserInfo(userInfo) {\r\n  if (typeof Storage !== \"undefined\") {\r\n    if (!userInfo) localStorage.ChatUserInfo = null;\r\n    else localStorage.ChatUserInfo = JSON.stringify(userInfo);\r\n    console.log(\"user info saved in local storage\");\r\n  } else {\r\n    console.log(\"unable to use localStorage\");\r\n  }\r\n}\r\n\r\nfunction getWindowDimensions() {\r\n  const { innerWidth: width, innerHeight: height } = window;\r\n  return {\r\n    width,\r\n    height,\r\n  };\r\n}\r\n\r\nexport function GetChatTitle(currentChat, chats, userInfo) {\r\n  let displayedChat;\r\n  if (!currentChat) return undefined;\r\n  displayedChat = chats?.find((chat) => chat.id == currentChat);\r\n\r\n  if (displayedChat?.name) return displayedChat.name;\r\n  else {\r\n    return displayedChat?.members?.find(\r\n      (member) => member !== userInfo?.username\r\n    );\r\n  }\r\n}\r\n\r\nexport function QueryStringGenerator(section, members, groupName, friends) {\r\n  let query = new URLSearchParams();\r\n  if (section) {\r\n    query.append(\"section\", section);\r\n  }\r\n\r\n  members.forEach((member) => {\r\n    if (friends.includes(member)) query.append(\"members\", member);\r\n  });\r\n\r\n  if (groupName?.trim()) query.append(\"group_name\", groupName);\r\n  return query.toString();\r\n}\r\n","export default function() {\r\n    return  <>\r\n    <div className=\"spinner-border\" role=\"status\">\r\n        <span className=\"sr-only\">Loading...</span>\r\n    </div>\r\n</>;\r\n}\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = { username: null, token: null, isLoading: true };\r\n\r\nconst userInfoSlice = createSlice({\r\n  name: \"userInfo\",\r\n  initialState,\r\n  reducers: {\r\n    setUserInfo(state, action) {\r\n      state.username = action.payload.username;\r\n      state.token = action.payload.token;\r\n      state.isLoading = action.payload.isLoading\r\n        ? action.payload.isLoading\r\n        : action.payload.isLoading === false\r\n        ? action.payload.isLoading\r\n        : state.isLoading;\r\n    },\r\n    setIsLoading(state, action) {\r\n      state.isLoading = action.payload;\r\n    },\r\n    increment(state) {\r\n      state.counter++;\r\n    },\r\n    decrement(state) {\r\n      state.counter--;\r\n    },\r\n    increase(state, action) {\r\n      state.counter = state.counter + action.payload;\r\n    },\r\n    toggleCounter(state) {\r\n      state.showCounter = !state.showCounter;\r\n    },\r\n  },\r\n});\r\n\r\nexport const userInfoActions = userInfoSlice.actions;\r\n\r\nexport default userInfoSlice;\r\n","// const http_url = \"http://127.0.0.1:8000\";\r\n\r\n// const ws_url = \"ws://127.0.0.1:8000\";\r\n\r\nconst http_url = \"https://mk-chat-be.herokuapp.com\";\r\nconst ws_url = \"wss://mk-chat-be.herokuapp.com\";\r\n\r\nexport { http_url, ws_url };\r\n","import React, { useState, useEffect } from \"react\";\r\n// import './Chat.css;'\r\nimport {SaveUserInfo} from \"../../others/shared_functions\";\r\nimport Spinner from '../Spinner/Spinner';\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {userInfoActions} from \"../../store/userInfo-slice\";\r\nimport Button from '@mui/material/Button';\r\nimport TextField from '@mui/material/TextField';\r\n\r\n\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useParams,\r\n    Redirect,\r\n    useHistory\r\n  } from \"react-router-dom\";\r\n\r\nimport { http_url, ws_url } from \"../../others/shared_vars\";\r\n\r\nexport default function Login({loggedIn}) {\r\n    let history = useHistory();\r\n    const dispatch = useDispatch(); \r\n    const [username, setUsername] = useState(null);\r\n    const [password, setPassword] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    \r\n    function onSubmit(event) {\r\n        event.preventDefault();\r\n        setIsLoading(true);\r\n        fetch( http_url + '/chat_app/api-token-auth/', {\r\n            method: 'POST',\r\n            headers: {'Content-Type': 'application/json'},\r\n            body: JSON.stringify({username, password})\r\n        })\r\n        .then(response => {\r\n            setIsLoading(false);\r\n            return response.json();\r\n        })\r\n        .then(data => {\r\n            console.log(data);\r\n            if (data?.token) {\r\n                SaveUserInfo({username: data.username, token: data.token});\r\n                // SetUserInfoProp({username: data.username, token: data.token});\r\n                dispatch(userInfoActions.setUserInfo({username: data.username, token: data.token}));\r\n            } else if (data?.non_field_errors) {\r\n                console.log('error message', data.non_field_errors);\r\n            }\r\n        });\r\n    }\r\n    \r\n    function onChange(event, type) {\r\n        if (type === \"username\")\r\n            setUsername(event.target.value);\r\n        else if (type === \"password\") \r\n            setPassword(event.target.value); \r\n    }\r\n\r\n    function VisitorSignIn(type) {\r\n        let username = undefined;\r\n        let password = undefined;\r\n        console.log(type); \r\n        if (type === 1) {\r\n            username = 'visitor1';\r\n            password = '123';\r\n        } else if  (type === 2) {\r\n            username = 'visitor2';\r\n            password = '123';\r\n        }\r\n        setIsLoading(true);\r\n        fetch( http_url + '/chat_app/api-token-auth/', {\r\n            method: 'POST',\r\n            headers: {'Content-Type': 'application/json'},\r\n            body: JSON.stringify({username, password})\r\n        })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            console.log(data);\r\n            setIsLoading(false);\r\n            if (data.token) {\r\n                SaveUserInfo({username: data.username, token: data.token});\r\n                // SetUserInfoProp({username: data.username, token: data.token});\r\n                dispatch(userInfoActions.setUserInfo({username: data.username, token: data.token}));\r\n            } else if (data.non_field_errors) {\r\n                console.log('error message', data.non_field_errors);\r\n            }\r\n        });\r\n    }\r\n\r\n    return  (loggedIn? <Redirect to='/' /> \r\n    :\r\n    <div className='login'>\r\n        <form onSubmit={onSubmit} className='login-form'>\r\n            <TextField id=\"outlined-basic\" type=\"text\" placeholder=\"id\" onChange={(event)=>onChange(event, 'username')} value={username} />\r\n            <TextField id=\"outlined-password-input\" type=\"password\" placeholder=\"password\" onChange={(event)=>onChange(event, 'password')} value={password} />\r\n            <Button variant=\"contained\" type=\"submit\">log in</Button>\r\n        </form>\r\n        <div>do not have an account yet?</div>\r\n        <div className='creat-new-account'><Button variant=\"contained\" onClick={()=>history.push('/register')}>Create a New Account</Button></div>\r\n        <div>want to try the app without registering?</div>\r\n        <div className = 'visitor-sign-in'><Button variant=\"contained\"  onClick={() => VisitorSignIn(1)}>sign in as visitor1</Button></div>\r\n        <div className = 'visitor-sign-in'><Button variant=\"contained\"  onClick={() => VisitorSignIn(2)}>sign in as visitor2</Button></div>\r\n        {isLoading&&<Spinner />}\r\n    </div>\r\n    );\r\n        // <form onSubmit={onSubmit}>\r\n        //     <input type=\"text\" placeholder=\"id\" onChange={(event)=>onChange(event, 'username')} value={username} />\r\n        //     <input type=\"password\" placeholder=\"password\" onChange={(event)=>onChange(event, 'password')} value={password} />\r\n        //     <button type=\"submit\">log in</button>\r\n        // </form>\r\n}\r\n\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {SaveUserInfo} from \"../../others/shared_functions\";\r\nimport Spinner from '../Spinner/Spinner';\r\nimport Button from '@mui/material/Button';\r\nimport TextField from '@mui/material/TextField';\r\n\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useParams,\r\n    Redirect,\r\n    useHistory\r\n  } from \"react-router-dom\";\r\n\r\nimport { http_url, ws_url } from \"../../others/shared_vars\";\r\nimport { userInfoActions } from \"../../store/userInfo-slice\";\r\n\r\nexport default function Registration({userInfo, loggedIn, SetUserInfoProp}) {\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n\r\n    const [username, setUsername] = useState(null);\r\n    const [password, setPassword] = useState(null);\r\n    const [password2, setPassword2] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    \r\n    function onSubmit(event) {\r\n        event.preventDefault();\r\n        // let content = {id, pwd};]\r\n        setIsLoading(true);\r\n        fetch( http_url + '/chat_app/registration', {\r\n            method: 'POST',\r\n            headers: {'Content-Type': 'application/json'},\r\n            body: JSON.stringify({username, password, password2})\r\n        })\r\n        .then(response => {\r\n            setIsLoading(false);\r\n            return response.json();})\r\n        .then(data => {\r\n            console.log(data);\r\n            let keys = Object.keys(data)\r\n            if (keys.find(key => key === \"token\")) {\r\n                SaveUserInfo({username: data.username, token: data.token});\r\n                // SetUserInfoProp({username: data.username, token: data.token});\r\n                dispatch(userInfoActions.setUserInfo({username: data.username, token: data.token}));\r\n            } else if (keys.find(key => key === \"error\")) {\r\n                console.log('error message', data.error);\r\n            }\r\n        });\r\n    }\r\n    \r\n    function onChange(event, type) {\r\n        if (type === \"username\")\r\n            setUsername(event.target.value);\r\n        else if (type === \"password\") \r\n            setPassword(event.target.value); \r\n        else if (type == \"password2\")\r\n            setPassword2(event.target.value); \r\n    }\r\n\r\n    if (loggedIn) return <Redirect to='/' />\r\n\r\n    return <>\r\n    <div className = \"registration\">\r\n    {isLoading&&<Spinner/>}\r\n        <form onSubmit={onSubmit}>\r\n            <TextField id=\"outlined-basic\" placeholder=\"id\" onChange={(event)=>onChange(event, 'username')} value={username} />\r\n            <TextField id=\"outlined-password-input\" type=\"password\" placeholder=\"password\" onChange={(event)=>onChange(event, 'password')} value={password} />\r\n            <TextField id=\"outlined-password-input\" type=\"password\" placeholder=\"retype password\" onChange={(event)=>onChange(event, 'password2')} value={password2} />\r\n            <Button variant=\"contained\" type=\"submit\">register</Button>\r\n        </form> \r\n    <div>Already registered? <Button variant=\"contained\" onClick={()=>history.push('/login')}>Go to sign in page</Button></div>  \r\n    </div>\r\n    \r\n    </>;\r\n}\r\n\r\n\r\n","export default __webpack_public_path__ + \"static/media/x-lg.db763ca8.svg\";","export default __webpack_public_path__ + \"static/media/info.f4a46c68.svg\";","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n  chats: [],\r\n  friends: [],\r\n  currentChat: null,\r\n  chatHistory: null,\r\n};\r\n\r\nconst statusSlice = createSlice({\r\n  name: \"status\",\r\n  initialState,\r\n  reducers: {\r\n    setChats(state, action) {\r\n      state.chats = action.payload.chats;\r\n    },\r\n    addChat(state, action) {\r\n      state.chats.push(action.payload);\r\n    },\r\n    setFriends(state, action) {\r\n      state.friends = action.payload.friends;\r\n    },\r\n    addFriend(state, action) {\r\n      state.friends.push(action.payload);\r\n    },\r\n    setCurrentChat(state, action) {\r\n      state.currentChat = action.payload;\r\n    },\r\n    setChatHistory(state, action) {\r\n      state.chatHistory = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const statusActions = statusSlice.actions;\r\n\r\nexport default statusSlice;\r\n","import React from \"react\";\r\nimport './Friend.scss';\r\nimport {StringToColor} from '../../others/shared_functions';\r\nimport { Button } from \"@mui/material\";\r\n\r\nexport default function Friend ({friend, onClickFriend, checked, changeCheck, isFriend, addFriend}) {\r\n    \r\n    const style = {backgroundColor: StringToColor(friend)}; \r\n    \r\n    if (changeCheck || addFriend) {\r\n        return <>\r\n        <div className='friend additional-field' onClick = {() => onClickFriend(friend)}>\r\n            <div>\r\n                <div className='userIcon' style={style}>\r\n                    {friend[0]}\r\n                </div>\r\n                {friend}\r\n            </div>\r\n            {changeCheck&& <input type='checkbox' checked={checked} onChange={changeCheck} />}\r\n            {addFriend&& \r\n                <Button \r\n                    value={friend} \r\n                    disabled={isFriend} \r\n                    onClick={e=>addFriend(e)}\r\n                >\r\n                 {isFriend? 'added': 'add'} \r\n                 </Button>}\r\n        </div>\r\n    </>    \r\n    }\r\n    \r\n    return <>\r\n        <div className='friend' onClick = {() => onClickFriend(friend)}>\r\n            <div className='userIcon' style={style}>\r\n                {friend[0]}\r\n            </div>\r\n            {friend}\r\n        </div>\r\n    </>    \r\n}\r\n\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\n\r\n\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Friend from '../Friend/Friend';\r\n\r\nconst useStyles = makeStyles({\r\n    topScrollPaper: {\r\n      alignItems: \"flex-start\"\r\n    }});\r\n\r\nexport default function ChatWindowModal(prop) {\r\n    const members = useSelector(state => state.status.chatHistory?.members);\r\n\r\n    const classes = useStyles(); \r\n\r\n    if (!members) {\r\n        return null;\r\n    }; \r\n\r\n    return ( <>    \r\n    <Dialog\r\n        open={prop.modalOpen}\r\n        onClose={() => prop.setModalOpenProp(false)}\r\n        container={() => document.querySelector('.chat-window')}\r\n        style={{position: 'absolute'}}\r\n        BackdropProps={{ style: { position: 'absolute' } }}\r\n        componentsProps={{style: { padding: '100' }}}\r\n\r\n        // classes={{\r\n        //     scrollPaper: classes.topScrollPaper}}\r\n\r\n        // aria-labelledby=\"modal-modal-title\"\r\n        // aria-describedby=\"modal-modal-description\"\r\n    >\r\n        <DialogTitle>members</DialogTitle>\r\n        \r\n        {members.map(member => <Friend key={member} friend={member} onClickFriend = {() => {return} }/>)}\r\n\r\n    </Dialog>\r\n    </>\r\n    )\r\n}\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useParams,\r\n    useHistory,\r\n  } from \"react-router-dom\";\r\nimport TimeAgo from 'timeago-react';\r\nimport xIcon from \"../../icons/x-lg.svg\";\r\nimport infoIcon from \"../../icons/info.svg\";\r\nimport { MobileViewSide } from \"../../others/shared_functions\";\r\nimport { http_url, ws_url } from \"../../others/shared_vars\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {statusActions} from \"../../store/status-slice\";\r\nimport TextField from '@mui/material/TextField';\r\nimport Grid from '@mui/material/Grid';\r\nimport ChatWindowModal from '../ChatWindowModal/ChatWindowModal';\r\nimport {GetChatTitle} from '../../others/shared_functions';\r\nimport './ChatWindow.scss'\r\n\r\n\r\n\r\nexport default function ChatWindow({inputOn, socket, newChatData, mobileViewSide}) {\r\n\r\n\r\n    const { room_id } = useParams();\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const userInfo = useSelector(state => state.userInfo);\r\n    const chatHistory = useSelector(state => state.status.chatHistory);\r\n    const currentChat = useSelector(state=> state.status.currentChat);\r\n    const chats = useSelector(state => state.status.chats);\r\n\r\n    const [chatTitle, setChatTitle] = useState(null);\r\n    const [content, setContent] = useState('');\r\n    const scroll = useRef(null);\r\n    const [disabled, setDisabled] = useState(false);\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n\r\n    function setModalOpenProp (value) {\r\n        setModalOpen(value);\r\n    }\r\n\r\n    useEffect(()=> {\r\n        scroll.current.scrollTop = scroll.current.scrollHeight;\r\n    },[chatHistory])\r\n\r\n    useEffect(() => {\r\n        if (mobileViewSide) MobileViewSide(mobileViewSide);}\r\n    ,[mobileViewSide]);  \r\n\r\n    useEffect(()=>{\r\n    if (room_id) {\r\n        dispatch(statusActions.setCurrentChat(room_id));\r\n        // setChatTitle(GetChatTitle(currentChat, chats, userInfo));\r\n    }\r\n    else dispatch(statusActions.setCurrentChat(null));\r\n\r\n        return () =>{\r\n            dispatch(statusActions.setCurrentChat(null));\r\n        }\r\n    },[room_id])\r\n\r\n    useEffect(()=>\r\n    {\r\n        if (newChatData?.groupName) {\r\n            setChatTitle(newChatData.groupName);\r\n        } else if(newChatData?.members) {\r\n            setChatTitle(newChatData.members[0]);\r\n        } else {\r\n            setChatTitle(GetChatTitle(currentChat, chats, userInfo));\r\n        }\r\n        \r\n    }, [currentChat, newChatData, chats]\r\n    )\r\n\r\n    useEffect(() => {\r\n        if (newChatData?.members) {\r\n            let newChatMembers = [...newChatData.members, userInfo.username];\r\n            dispatch(statusActions.setCurrentChat({newChatMembers}));\r\n        }\r\n    }, [newChatData])\r\n\r\n\r\n\r\n    // if (room_id) setCurrentChatProp(room_id)\r\n    // else setCurrentChatProp(undefined)\r\n    \r\n    // if (room_id) dispatch(statusActions.setCurrentChat(room_id));\r\n    // else dispatch(statusActions.setCurrentChat(null));\r\n\r\n    // useEffect(() => {\r\n    //     console.log('newChatData', newChatData);\r\n    //     console.log('currentChat', currentChat);\r\n    //     if (newChatData?.members) {\r\n    //         console.log('changing chat history', newChatData);\r\n    //         dispatch(statusActions.setChatHistory({members: newChatData.members}));\r\n    //     }\r\n\r\n    // }, [newChatData])\r\n\r\n\r\n    function sendMessage(e) {\r\n        e.preventDefault();\r\n        if(socket && room_id && content.trim().length) {\r\n            if(typeof socket === 'object'){\r\n                if (socket.url) socket.send(JSON.stringify({message: content, room_id}));  \r\n            }\r\n        } else if(socket && newChatData && content.trim().length) {\r\n            console.log(\"new chat sent: \", {...newChatData, message: content});\r\n            socket.send(JSON.stringify({...newChatData, message: content})); \r\n            setDisabled(false);        \r\n        }\r\n        setContent('');\r\n    }\r\n\r\n\r\n    // not used\r\n    function onSubmit(e) {\r\n        e.preventDefault();\r\n        if (content.trim().length) {\r\n            console.log(content);\r\n            fetch( http_url + '/chat_app/chat_update/' + room_id, {\r\n                method: 'POST',\r\n                headers: \r\n                    {\r\n                        'Content-Type': 'application/json',\r\n                        'Authorization': 'token '+ userInfo.token, \r\n                    },\r\n                body: JSON.stringify({content}), \r\n            })\r\n            .then(response => response.json())\r\n            .then((data) => {\r\n                console.log(data);\r\n                \r\n            }); \r\n        }\r\n        setContent('');\r\n    }\r\n\r\n    function onChange(e) {\r\n        setContent(e.target.value);\r\n    }\r\n\r\n    const localTZ = Intl.DateTimeFormat().resolvedOptions().timeZone; \r\n\r\n    const messages = chatHistory?.messages?.map(message => {\r\n        if (userInfo.username===message.sender) {\r\n            return (\r\n                <div key={message.time} className='message-block self'>\r\n                    <div className = 'container'>\r\n                        <div className='content'>\r\n                            {message.content}\r\n                        </div>\r\n                    </div>\r\n                    <div className='time'>\r\n                        {/* {convertTZ(message.time, localTZ).getHours()} */}\r\n                        <TimeAgo datetime={message.time}/>\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div key={message.time} className='message-block other'>\r\n                    <div className='sender'>\r\n                        {message.sender}\r\n                    </div>\r\n                    <div className='content'>\r\n                        {message.content}\r\n                    </div>\r\n                    <div className='time'>\r\n                        <TimeAgo datetime={message.time}/>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    });\r\n\r\n    return (\r\n        <div className = {`right chat-window`}>\r\n            <div className = {`right-row1 chat-header`}>               \r\n                {/* {newChatData && <div onClick={()=>history.push('/')}> home</div>} */}\r\n                \r\n                {(chatHistory || newChatData) && <>\r\n                    <div>\r\n                        <div className={`iconContainer xIconContainer`} onClick={()=>history.push('/')}> \r\n                            <img src={xIcon} className='icon' />\r\n                        </div>\r\n                        <div className='chatTitle'>\r\n                        {chatTitle}\r\n                        </div>\r\n                    </div>\r\n                    <div className='iconContainer' onClick={()=>setModalOpen(true)}> \r\n                        <img src={infoIcon} className='icon' />\r\n                    </div>\r\n                    </>}\r\n            </div>\r\n            <div className = 'right-row2' ref = {scroll}>\r\n                {messages?messages \r\n                : inputOn? <div className='greyed-out'>send a new message</div>\r\n                : <div className='greyed-out'>There are no messages to display. Please select a chat to display messages.</div>}\r\n            </div>\r\n            <div className = 'right-row3'>\r\n                {\r\n                    (messages||inputOn)&& \r\n                    <form onSubmit = {e => sendMessage(e)} autoComplete=\"off\">\r\n                        <div>\r\n                           <TextField id=\"outlined-basic\" variant=\"outlined\" type=\"text\" disabled={disabled} placeholder='Aa' value={content} onChange={e => onChange(e)} autoFocus={true}/>\r\n                        </div>\r\n                    </form>            \r\n                }\r\n            </div>\r\n            < ChatWindowModal \r\n                modalOpen={modalOpen}\r\n                setModalOpenProp={setModalOpenProp}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/group-icon.eb244b39.svg\";","export default __webpack_public_path__ + \"static/media/arrow-left.83aa775a.svg\";","import React, { useState, useEffect, Component } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  useParams,\r\n  useHistory,\r\n  useLocation\r\n} from \"react-router-dom\";\r\nimport ChatWindow from \"../ChatWindow/ChatWindow\";\r\nimport Friend from \"../Friend/Friend\";\r\nimport { MobileViewSide } from \"../../others/shared_functions\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { statusActions } from \"../../store/status-slice\";\r\nimport xIcon from \"../../icons/x-lg.svg\";\r\nimport groupIcon from \"../../icons/group-icon.svg\";\r\nimport  {Button, IconButton, TextField }  from '@mui/material';\r\nimport arrowLeftIcon from \"../../icons/arrow-left.svg\";\r\nimport './NewChat.scss'\r\nimport { QueryStringGenerator } from \"../../others/shared_functions\"; \r\n\r\n\r\nexport default function NewChat ({ socket, onClickFriend,  mobileViewSide}) {\r\n  \r\n  const sections = ['new_message','add_participants','add_title', 'send_message'];\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const friends = useSelector(state => state.status.friends);\r\n\r\n  let queryParams = new URLSearchParams(location.search);\r\n  let queryParamsSection = queryParams.get('section')? queryParams.get('section').trim() : '';\r\n  let queryParamsMembers = queryParams.getAll('members');\r\n  let queryParamsGroupName = queryParams.get('group_name')? queryParams.get('group_name').trim() : '';\r\n\r\n  if (!sections.includes(queryParamsSection)) {\r\n    queryParamsSection = 'new_message';\r\n  }\r\n\r\n  switch(queryParamsSection) {\r\n    case 'new_message':\r\n      queryParamsMembers = [];\r\n      queryParamsGroupName = '';\r\n      break;\r\n    case 'send_message':\r\n\r\n      queryParamsMembers = queryParamsMembers.filter(member => friends.includes(member));\r\n      console.log(\"filtered members are\", queryParamsMembers, queryParamsGroupName, queryParamsMembers.length);\r\n\r\n      if (!queryParamsGroupName && queryParamsMembers.length === 1) {\r\n        // need to check if a chat room already exists for the member\r\n        break; \r\n      } else if (queryParamsGroupName && queryParamsMembers.length > 1) {\r\n        console.log('yes!!')\r\n        break\r\n      } else {\r\n        queryParamsSection = 'new_message';\r\n        queryParamsMembers = [];\r\n      }\r\n      break;\r\n    default:\r\n      queryParamsMembers = queryParamsMembers.filter(member => friends.includes(member));  \r\n  }\r\n\r\n  console.log('\\nsection is', queryParamsSection);\r\n\r\n  const [section, setSection] = useState(queryParamsSection);\r\n  const [groupName, setGroupName] = useState(queryParamsGroupName);\r\n  const [checkedUsers, setCheckedUsers] = useState(queryParamsMembers);\r\n\r\n  // const [section, setSection] = useState('new_message');\r\n  // const [groupName, setGroupName] = useState('');\r\n  // const [checkedUsers, setCheckedUsers] = useState([]);\r\n\r\n  const [fullyLoaded, setFullyLoaded] = useState(false);\r\n  const [inputOn, setInputOn] = useState(null);\r\n  const [newChatData, setNewChatData] = useState({\r\n    newChat: true,\r\n    groupName: null,\r\n    members: null,\r\n  });\r\n\r\n\r\n  useEffect(() => {\r\n    console.log('newchat rerendering because location.search changed');\r\n\r\n    const queryParams = new URLSearchParams(location.search);\r\n    let queryParamsSection = queryParams.get('section')? queryParams.get('section').trim() : '';\r\n    let queryParamsMembers = queryParams.getAll('members');\r\n    let queryParamsGroupName = queryParams.get('group_name')? queryParams.get('group_name').trim() : '';\r\n  \r\n    if (!sections.includes(queryParamsSection)) {\r\n      queryParamsSection = 'new_message'\r\n    }\r\n  \r\n    switch(queryParamsSection) {\r\n      case 'new_message':\r\n        queryParamsMembers = [];\r\n        queryParamsGroupName = '';\r\n        break;\r\n      case 'send_message':\r\n        \r\n        queryParamsMembers = queryParamsMembers.filter(member => friends.includes(member));\r\n\r\n        if (!queryParamsGroupName && queryParamsMembers.length === 1) {\r\n          // need to check if a chat room already exists for the member\r\n          break; \r\n        } else if (queryParamsGroupName && queryParamsMembers.length > 1) {\r\n          console.log('yes!!')\r\n          break\r\n        } else {\r\n          queryParamsSection = 'new_message';\r\n          queryParamsMembers = [];\r\n        }\r\n        break;\r\n      default:\r\n        queryParamsMembers = queryParamsMembers.filter(member => friends.includes(member));  \r\n    }\r\n\r\n    setSection(queryParamsSection);\r\n    setGroupName(queryParamsGroupName);\r\n    setCheckedUsers(queryParamsMembers);\r\n\r\n    // setSection((prevState) => {\r\n    //   if (prevState !== queryParamsSection) return queryParamsSection;\r\n    // });\r\n    // setGroupName(prevState => {\r\n    //   if (prevState !== queryParamsGroupName) return queryParamsGroupName;\r\n    //   });\r\n    // setCheckedUsers(prevState => {\r\n    //   if (prevState !== queryParamsMembers) return queryParamsMembers;\r\n    // });\r\n  }, [location.search])\r\n\r\n  useEffect(() => {\r\n    setNewChatData({...newChatData, groupName, members: checkedUsers})\r\n  }, [checkedUsers, groupName])\r\n\r\n  // dispatch(statusActions.setChatHistory(null));\r\n\r\n  useEffect(() => {\r\n    if (mobileViewSide) MobileViewSide(mobileViewSide);}\r\n    ,[mobileViewSide]);  \r\n\r\n  function SwitchInputOn(value) {\r\n    setInputOn(value);\r\n  }\r\n\r\n  // function Change_section (current) {\r\n  //   if (current === 'new_message') {\r\n  //     setSection(new_message);\r\n  //     setInputOn(false);\r\n  //   } else if (current === 'add_participants') {\r\n  //     setSection(add_participants);\r\n  //     setInputOn(false);\r\n  //   } else if (current === 'add_title') {\r\n  //     setSection(add_title);\r\n  //     setInputOn(false);\r\n  //   } else if (current === 'send_message') {\r\n  //     setInputOn(true); \r\n  //   }\r\n  // }\r\n  \r\n  function ChangeCheck(user) {\r\n    // let checkedUsersCopy = [...checkedUsers];\r\n    if (checkedUsers.find(e => e == user)) {\r\n      console.log(user, 'unchecking')\r\n      setCheckedUsers(checkedUsers.filter(e => e !== user));\r\n    } else {\r\n      console.log(user, 'checking')\r\n      setCheckedUsers(checkedUsers.concat([user]));\r\n    }\r\n  }\r\n\r\n  useEffect(()=>{\r\n    MobileViewSide('right');\r\n  },[section]);\r\n\r\n    // console.log('NewChat mounted');\r\n\r\n\r\n    // function ChangeCheck(id) {\r\n    //   // let checkedUsersCopy = [...checkedUsers];\r\n    //   if (checkedUsers.find(user => user == id)) {\r\n    //     console.log(id, 'unchecking')\r\n    //     setCheckedUsers(checkedUsers.filter(user => user !== id));\r\n    //   } else {\r\n    //     console.log(id, 'checking')\r\n    //     setCheckedUsers(checkedUsers.concat([id]));\r\n    //   }\r\n    // }\r\n\r\n  // not used anymore\r\n  function onSubmit(e) {\r\n    console.log('onSubmit');\r\n    e.preventDefault(); \r\n    if (!groupName?.trim()) return ; \r\n    setSection('send_message'); \r\n    setInputOn(true);\r\n  }\r\n\r\n  function JumpToSendMessage(e) {\r\n    e.preventDefault();\r\n    if (!groupName?.trim()) return;\r\n    history.push(\"newchat?\" + QueryStringGenerator('send_message', checkedUsers, groupName, friends));\r\n  }\r\n\r\n  function handleClick() {\r\n    if (!groupName?.trim()) return ; \r\n    setSection('send_message'); \r\n    setInputOn(true);\r\n  }\r\n\r\n\r\n\r\n  // const newChatData = {\r\n  //   newChat: true,\r\n  //   groupName,\r\n  //   members: checkedUsers,\r\n  // };\r\n\r\n\r\n\r\n  useEffect(()=>{\r\n    // if (location.state) {\r\n    //   console.log('location found');\r\n    //   setSection('send_message');\r\n    //   setCheckedUsers([location.state.user]);\r\n    //   setInputOn(true);\r\n    // }\r\n\r\n    if (location.state?.user) {\r\n      console.log('location found', location.state.user);\r\n      // if (section !== 'send_message') setSection('send_message');\r\n      if (!inputOn) setInputOn(true);\r\n      if (checkedUsers.length < 2 && location.state.user !== checkedUsers[0]) \r\n      setCheckedUsers([location.state.user]);\r\n      setGroupName('');\r\n      setSection('send_message');\r\n    }\r\n  }, [location]);  \r\n\r\n\r\n    // if (location.state?.user) {\r\n    //   console.log('location found');\r\n    //   if (section !== 'send_message') setSection('send_message');\r\n    //   if (!inputOn) setInputOn(true);\r\n    //   if ([location.state.user] !== checkedUsers) \r\n    //   setCheckedUsers([location.state.user]);\r\n    // }\r\n  \r\n\r\n\r\n  const new_message = (\r\n    <div className='NewChat right'>\r\n      <div className='right-row1'>\r\n        <div className='iconContainer xIconContainer' onClick={()=>history.push('/')}> \r\n            <img src={xIcon} className='icon' />\r\n        </div>\r\n        <div >\r\n          New message\r\n        </div>\r\n\r\n        {/* <div>\r\n          New message\r\n        </div>\r\n        <div>\r\n          <button onClick={() => setSection('add_participants')}> Create a New Group </button>\r\n          <button onClick={() => history.push('/')}>home</button>\r\n        </div> */}\r\n      </div>\r\n      <div className='right-row2'>\r\n        <div className = 'create-new-group' onClick={()=>history.push('/newchat?section=add_participants')}>\r\n          <div className='iconContainer group'> \r\n              <img src={groupIcon} className='icon' />\r\n          </div>\r\n          <div >\r\n            Create a New Group\r\n          </div>\r\n        </div>\r\n        <div className=\"suggested\">\r\n          Suggested:\r\n        </div>\r\n        {friends?.map(friend => { return (\r\n          // <div onClick={()=>onClickFriend(friend)}>\r\n          //   {friend}\r\n          // </div>\r\n          <Friend friend = {friend} onClickFriend={onClickFriend}/>\r\n        );})}\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const add_participants = (\r\n    <div className='NewChat AddParticipants right'>\r\n      <div className='right-row1'>\r\n        <div>\r\n          <div className='iconContainer' onClick={() => history.push('/newchat?section=new_message')}> \r\n              <img src={arrowLeftIcon} className='icon' />\r\n          </div>\r\n          Add Participants\r\n        </div>\r\n        <Button id='next-button' onClick={()=> history.push('/newchat?' + QueryStringGenerator('add_title', checkedUsers, null, friends))} disabled={checkedUsers.length < 2}>\r\n          NEXT\r\n        </Button>       \r\n      </div>\r\n      <div className='right-row2'>\r\n        {friends?.map(friend => {\r\n          // const label = 'friend' + friend.id;\r\n          // const label = friend;\r\n          return (<>\r\n            <div className='friend-checkbox-container'>\r\n              <Friend \r\n              friend = {friend}  \r\n              onClickFriend = {() => null}\r\n              checked={checkedUsers.find(user => user === friend)} \r\n              changeCheck={() => ChangeCheck(friend)}\r\n              />\r\n              {/* <Checkbox label={friend} value={checkedUsers.find(user => user === friend)} changeCheck={() => ChangeCheck(friend)} /> */}\r\n            </div>\r\n            </>);})}\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n  const add_title = (\r\n    <div className = 'NewChat AddTitle right'>\r\n      <div className='right-row1'>\r\n        <div>\r\n            <div className='iconContainer' onClick={() => history.push(\"/newchat?section=add_participants\")}> \r\n                <img src={arrowLeftIcon} className='icon' />\r\n            </div>\r\n            Add Title\r\n          </div>\r\n          <Button id='create-button' onClick={()=> history.push('/newchat?' + QueryStringGenerator('send_message', checkedUsers, groupName, friends))} disabled={!groupName.trim()}>\r\n            CREATE\r\n          </Button> \r\n\r\n        {/* <button onClick={()=>setSection('add_participants')}>back</button>\r\n        Add Title\r\n        <button form='form1' disabled ={!groupName.trim()}> CREATE</button> */}\r\n      </div>\r\n      <div className='right-row2'>\r\n        <form id=\"form1\"  onSubmit={(e)=>{JumpToSendMessage(e)}}>\r\n          {/* <input type='text' placeholder='Group Name (Required)' required=\"required\" value={groupName} onChange={e=>setGroupName(e.target.value)}></input> */}\r\n          <div className='text-field-container'>\r\n            <TextField variant=\"standard\" type='text' placeholder='Group Name (Required)' required=\"required\" value={groupName} onChange={e=>setGroupName(e.target.value)} />\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n    \r\n  const send_message = <>\r\n    <ChatWindow \r\n    // chatHistory = {chatHistory} \r\n    // setChatHistoryProp={setChatHistoryProp}\r\n    inputOn={true} \r\n    newChatData={newChatData}\r\n    socket={socket}\r\n    />\r\n  </>;\r\n\r\n    // let page = null; \r\n  \r\n    // if (section === 'new_message') {\r\n    //   page = new_message;\r\n    // } else if (section === 'add_participants') {\r\n    //   page = add_participants;\r\n    // } else if (section === 'add_title') {\r\n    //   page = add_title;\r\n    // }\r\n    \r\n  const page = \r\n  section === 'new_message'? new_message\r\n  : section === 'add_participants'? add_participants\r\n  : section === 'add_title'? add_title\r\n  : section === 'send_message'? send_message\r\n  : null; \r\n\r\n  // if (location.state?.user && checkedUsers.length < 2 && location.state?.user !== checkedUsers[0] ) {\r\n  //   return <div className = 'right'></div>; \r\n  // }\r\n\r\n\r\n\r\n  // to directly render send_message page\r\n  if (location.state?.user && section !== 'send_message') {\r\n    return <div className='right'/>  ; \r\n  }\r\n\r\n  return page; \r\n  }\r\n  \r\n  function Checkbox ({label, value, changeCheck}) {\r\n    return (\r\n      <div className='group-participant'>\r\n        <label>\r\n          {/* {label} */}\r\n          <input type='checkbox' checked={value} onChange={changeCheck} ></input>\r\n        </label>\r\n      </div> \r\n      );\r\n  }\r\n  ","import React, { useState, useEffect, Component } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  useParams,\r\n  useHistory\r\n} from \"react-router-dom\";\r\nimport Friend from \"../Friend/Friend\";\r\nimport { MobileViewSide } from \"../../others/shared_functions\";\r\nimport { http_url, ws_url } from \"../../others/shared_vars\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { statusActions } from \"../../store/status-slice\";\r\nimport xIcon from \"../../icons/x-lg.svg\"\r\nimport  {Button, IconButton, TextField }  from '@mui/material';\r\nimport './AddFriend.scss'\r\n\r\n\r\nexport default function AddFriend () {\r\n    const dispatch = useDispatch();\r\n\r\n\r\n    dispatch(statusActions.setChatHistory(null));\r\n    const [query, setQuery] = useState(undefined);\r\n    const [suggestions, setSuggestions] = useState(undefined);\r\n    const history = useHistory();\r\n    const userInfo = useSelector(state => state.userInfo);\r\n    const friends = useSelector(state => state.friends);\r\n\r\n\r\n    useEffect(()=>{\r\n        MobileViewSide('right');\r\n    }, [])\r\n\r\n    useEffect(()=>{\r\n        fetch( http_url + '/chat_app/add_friend?' + new URLSearchParams({username: query}), {\r\n            method: 'GET',\r\n            headers: {'Content-Type': 'application/json', 'Authorization': 'token '+ userInfo.token,},\r\n        })\r\n        .then(response => {\r\n            if (response.ok) return response.json()\r\n            else return null\r\n        })\r\n        .then(data => {\r\n            console.log(data);\r\n            setSuggestions(data);\r\n        });   \r\n    }\r\n    ,[query])\r\n\r\n    function onChange(e) {\r\n        setQuery(e.target.value);\r\n    }\r\n\r\n    function onSubmit(e) {\r\n        e.preventDefault();\r\n        fetch( http_url + '/chat_app/add_friend?' + new URLSearchParams({username: query}), {\r\n            method: 'GET',\r\n            headers: {'Content-Type': 'application/json', 'Authorization': 'token '+ userInfo.token,},\r\n        })\r\n        .then(response => {\r\n            if (response.ok) return response.json()\r\n            else return null\r\n        })\r\n        .then(data => {\r\n            console.log(data);\r\n            setSuggestions(data);\r\n        });\r\n    }\r\n\r\n    function onClick(e) {\r\n        let username = e.target.value;\r\n        let new_suggestion;\r\n        fetch( http_url + '/chat_app/add_friend', {\r\n            method: 'POST',\r\n            headers: {'Content-Type': 'application/json', 'Authorization': 'token '+ userInfo.token},\r\n            body: JSON.stringify({username})\r\n        })\r\n        .then(response => {console.log(response.status, response.ok); if (response.ok)response.json()})\r\n        .then(data => {\r\n            console.log(data);\r\n            new_suggestion = suggestions.map(suggestion => {\r\n                if (suggestion.username === username) return {username, isFriend: true}\r\n                return suggestion;\r\n            })\r\n            setSuggestions(new_suggestion);\r\n            // SetFriendsProp([...friends, username]); \r\n            dispatch(statusActions.addFriend(username));\r\n        });\r\n    } \r\n \r\n\r\n    const searchResult = <div className=\"right-row2>\">\r\n        {suggestions?.map(suggestion => <>\r\n            <Friend \r\n            friend={suggestion.username}\r\n            onClickFriend={()=>null}\r\n            isFriend={suggestion.isFriend}\r\n            addFriend={onClick}\r\n            />\r\n        </>\r\n        )}\r\n    </div>;\r\n\r\n    return <>\r\n    <div className=\"right add-friend\">\r\n        <div className=\"right-row1\">\r\n            <div className='iconContainer xIconContainer' onClick={()=>history.push('/')}> \r\n                <img src={xIcon} className='icon' />\r\n            </div>\r\n            <div >\r\n                Add friends\r\n            </div>\r\n        </div>\r\n        <div className='right-row2'>\r\n            <form onSubmit={e => onSubmit(e)}>\r\n                <div className='text-field-container'>\r\n                    <TextField variant=\"standard\" type='text' placeholder='search by username' required=\"required\" value={query}  onChange = {e=>onChange(e)} />\r\n                </div>\r\n            </form>\r\n        {searchResult}\r\n        </div>\r\n    </div>\r\n    </>;\r\n\r\n}","import React from \"react\";\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useParams,\r\n    useHistory,\r\n  } from \"react-router-dom\";\r\n\r\nimport {StringToColor} from '../../others/shared_functions';\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\n\r\nexport default function Chat({chat}) {\r\n    const history = useHistory();\r\n    const userInfo = useSelector(state => state.userInfo);\r\n    const path = \"/room/\" + chat.id;\r\n    const chatName = chat.name? chat.name \r\n    : chat.members?.length === 2 ? chat.members.find(member => member !== userInfo.username)\r\n    : undefined;\r\n\r\n    let otherMembers = chat?.members.filter(member => member !== userInfo.username);\r\n    \r\n    if (otherMembers?.length > 1) otherMembers = otherMembers.slice(0, 2);\r\n \r\n\r\n    return <>\r\n      <div className='chat' onClick={()=>history.push(path)}>      \r\n        {otherMembers.length > 1 ? (\r\n          <div className = 'userIcon group'> \r\n          {otherMembers.map(member => <div key={member} className='userIcon small' style = {{backgroundColor: StringToColor(member)}}> {member[0]} </div>)}\r\n          </div>\r\n          )\r\n        : otherMembers.map(member => \r\n        <div key={member} className='userIcon' style = {{backgroundColor: StringToColor(member)}}> \r\n          {member[0]} \r\n        </div>)}\r\n        {chatName}\r\n      </div>\r\n    </>\r\n}","import React from \"react\";\r\n// import './ChatPeopleList.css'\r\nimport Friend from \"../Friend/Friend\"\r\nimport Chat from \"../Chat/Chat\"\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\n\r\nexport default function ChatPeopleList({showChat, setChatHistoryProp, rooms, onClickFriend}) {\r\n   // chats = rooms.map(room => {\r\n   //    return <Chat content = {'chat-'+room.id} LoadChat = {LoadChat}/>\r\n   // });\r\n   const userInfo = useSelector(state => state.userInfo);\r\n   const chats = useSelector(state => state.status.chats);\r\n   const friends = useSelector(state => state.status.friends);\r\n\r\n   if (showChat) {\r\n      if (chats) {\r\n         return chats.map(chat => {\r\n            return <Chat key={chat.id} chat = {chat} setChatHistoryProp = {setChatHistoryProp}/>\r\n         });     \r\n      } \r\n      return 'no chats';\r\n   } \r\n   \r\n   if (friends) {\r\n      return friends.map(friend => {\r\n         return <Friend key={friend} friend = {friend} onClickFriend={onClickFriend}/>\r\n      })\r\n   }\r\n   return 'no friends';\r\n   \r\n\r\n   // return showChat?  \r\n   //    chats?.map(chat => {\r\n   //       return <Chat chat = {chat} setChatHistoryProp = {setChatHistoryProp}/>\r\n   //    })\r\n   //     : \r\n   //    friends.map(friend => {\r\n   //       return <Friend friend = {friend}/>\r\n   //    })\r\n\r\n   //     (\r\n   //    <>\r\n   //       <Friend />\r\n   //       <Friend />\r\n   //    </>\r\n   // )\r\n\r\n   // const friend_list = (\r\n   //    <>\r\n   //       <Friend />\r\n   //       <Friend />\r\n   //    </>\r\n   // )\r\n   ;\r\n\r\n   \r\n   // const chat_list = (\r\n   //    <>\r\n   //       <Chat content = {'c1'} LoadChat = {LoadChat}/>\r\n   //       <Chat content = {'c2'} LoadChat = {LoadChat}/>\r\n   //    </>\r\n   // );\r\n\r\n   // return showChat? chat_list : friend_list;\r\n}\r\n\r\n      // <> \r\n      //    <Chat content = {'c1'} LoadChat = {LoadChat}/>\r\n      //    <Chat content = {'c2'} LoadChat = {LoadChat}/>\r\n      // </>","export default __webpack_public_path__ + \"static/media/chat-fill.c06d5871.svg\";","export default __webpack_public_path__ + \"static/media/people-fill.1ec4cb9a.svg\";","import React from \"react\";\r\nimport './ChatPeopleToggle.css'; \r\nimport chat_fill from '../../icons/chat-fill.svg'\r\nimport people_fill from '../../icons/people-fill.svg'\r\n\r\nexport default function ChatPeopleToggle({ChatPeopleSwitch}) {\r\n\r\n    return <div className = 'ChatPeopleToggle'>\r\n        <div onClick={() => ChatPeopleSwitch(true)}>\r\n            <img className='chat_fill' src={chat_fill}/>\r\n            <div>Chat</div>\r\n        </div>\r\n        <div onClick={() => ChatPeopleSwitch(false)}>\r\n            <img className='people_fill' src={people_fill}/>\r\n            <div>People</div>\r\n        </div>\r\n    </div>;\r\n}","export default __webpack_public_path__ + \"static/media/log-out.a1f930e4.svg\";","export default __webpack_public_path__ + \"static/media/pencil-fill.8f9e674f.svg\";","export default __webpack_public_path__ + \"static/media/person-plus-fill.57f5c296.svg\";","import ChatPeopleList from \"../ChatPeopleList/ChatPeopleList\";\r\nimport ChatPeopleToggle from \"../ChatPeopleToggle/ChatPeopleToggle\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  useParams,\r\n  userHistory,\r\n  useHistory,\r\n} from \"react-router-dom\";\r\nimport { MobileViewSide, SaveUserInfo, StringToColor } from \"../../others/shared_functions\";\r\nimport logoutIcon from \"../../icons/log-out.svg\";\r\nimport pencilIcon from \"../../icons/pencil-fill.svg\";\r\nimport personPlusIcon from \"../../icons/person-plus-fill.svg\";\r\nimport xIcon from \"../../icons/x-lg.svg\";\r\nimport { http_url, ws_url } from \"../../others/shared_vars\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { userInfoActions } from \"../../store/userInfo-slice\";\r\nimport { statusActionsActions } from \"../../store/status-slice\";\r\nimport './Main.scss';\r\n\r\nexport default function Main ({setChatHistoryProp, rooms, onClickFriend}) {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const userInfo = useSelector(state => state.userInfo);\r\n  const [showChat, setShowChat] = useState(true);\r\n\r\n  function ChatPeopleSwitch(value) {\r\n    setShowChat(value);\r\n  }\r\n\r\n  function logout(){\r\n    SaveUserInfo();\r\n    fetch(http_url + '/chat_app/logout', \r\n    {\r\n      headers: {\r\n        'authorization': \"token \" + userInfo.token,\r\n        'Content-Type': 'application/json',\r\n      },\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      console.log('logged out');\r\n      console.log(data);\r\n      // setUserInfoProp(undefined);\r\n      // dispatch(userInfoActions.setUserInfo({username: null, token: null}));\r\n      window.location.reload();\r\n    }).catch(error => console.error(error));\r\n  }\r\n  // async function logout(){\r\n  //   let response = await fetch( http_url + '/chat_app/logout', \r\n  //   {\r\n  //     headers: {\r\n  //       'authorization': \"token \" + userInfo.token,\r\n  //       'Content-Type': 'application/json',\r\n  //     },\r\n  //   }); \r\n  //   let response_json = await response.json();\r\n  //   console.log(response_json);\r\n  // }\r\n\r\n  const profilePage = \r\n    <div className = 'profile-page'>\r\n      <div className = 'profile-header'>\r\n        <div className = 'profile-header-left'>\r\n          <div className='iconContainer' onClick={()=>ProfileOn(false)}>\r\n            <img src={xIcon} className='icon' />\r\n          </div>\r\n          <div>\r\n            Me\r\n          </div>\r\n        </div>\r\n        <div className='iconContainer' onClick={async () => await logout()}>\r\n          <img src={logoutIcon} className='icon' />\r\n        </div>\r\n      </div>\r\n      <div className='userIcon large' style={{backgroundColor: StringToColor(userInfo.username)}}>\r\n        {userInfo.username[0]}\r\n      </div>\r\n      <div className = 'profile-username'>\r\n        {userInfo.username}\r\n      </div>\r\n\r\n    </ div>;\r\n  \r\n  function ProfileOn(state) {\r\n    let profile = document.querySelector('.profile-page');\r\n    if (state) profile.style.display = 'block';\r\n    else profile.style.display = 'none';\r\n  }\r\n\r\n  return (\r\n    <div className = 'left Main'>\r\n      {profilePage}\r\n      <div className='left-row1'>\r\n        <div className = \"Header\">\r\n          <div className = 'Header-left'>\r\n            <div className='userIcon' style={{backgroundColor: StringToColor(userInfo.username)}} onClick={()=>ProfileOn(true)}>\r\n                {userInfo.username[0]}\r\n            </div>\r\n            {showChat? 'Chats' : 'People'}\r\n          </div>\r\n          <div className='buttons'>\r\n            <div className='iconContainer' onClick={()=>history.push('/addfriend')}>\r\n              <img src={personPlusIcon} className='icon' />\r\n            </div>\r\n            <div className='iconContainer' onClick={()=>history.push('/newchat?section=new_message')}>\r\n              <img src={pencilIcon} className='icon' />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n        <div className='left-row2'>\r\n          <ChatPeopleList onClickFriend={onClickFriend} showChat={showChat} setChatHistoryProp={setChatHistoryProp} rooms={rooms}/> \r\n        </div>\r\n        <div className='left-row3'>\r\n          <ChatPeopleToggle ChatPeopleSwitch={ChatPeopleSwitch}/>\r\n        </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\n\r\n// import counterReducer from \"./counter\";\r\n// import authReducer from \"./auth\";\r\nimport userInfoSlice from \"./userInfo-slice\";\r\nimport statusSlice from \"./status-slice\";\r\n\r\nconst store = configureStore({\r\n  reducer: {\r\n    userInfo: userInfoSlice.reducer,\r\n    status: statusSlice.reducer,\r\n  },\r\n});\r\n\r\nexport default store;\r\n","import \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./App.css\";\r\nimport Login from \"./components/Login/Login\";\r\nimport Registration from \"./components/Registration/Registration\";\r\nimport NewChat from \"./components/NewChat/NewChat\";\r\nimport AddFriend from \"./components/AddFriend/AddFriend\";\r\nimport Spinner from \"./components/Spinner/Spinner\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  useParams,\r\n  Redirect,\r\n  useLocation,\r\n  useHistory,\r\n} from \"react-router-dom\";\r\nimport ChatWindow from \"./components/ChatWindow/ChatWindow\";\r\nimport Main from \"./components/Main/Main\";\r\n// import { room1, room2, friend_list, room_list, userInfo2 } from \"./test_vars\";\r\nimport { http_url, ws_url } from \"./others/shared_vars\";\r\nimport { w3cwebsocket as W3CWebSocket } from \"websocket\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {\r\n  StringToColor,\r\n  MobileViewSide,\r\n  SaveUserInfo,\r\n  GetChatTitle,\r\n} from \"./others/shared_functions\";\r\nimport {\r\n  fetchUserInfo,\r\n  GeneralUpdate,\r\n  FetchMessages,\r\n} from \"./store/userInfo-actions\";\r\nimport { statusActions } from \"./store/status-slice\";\r\n\r\nexport default function App() {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  const userInfo = useSelector((state) => state.userInfo);\r\n  const chats = useSelector((state) => state.status.chats);\r\n  const friends = useSelector((state) => state.status.friends);\r\n  const currentChat = useSelector((state) => state.status.currentChat);\r\n  const chatHistory = useSelector((state) => state.status.chatHistory);\r\n\r\n  const [socket, setSocket] = useState({});\r\n\r\n  useEffect(() => {\r\n    if (userInfo.token) {\r\n      setSocket(new W3CWebSocket(ws_url + \"/ws/chat/?token=\" + userInfo.token));\r\n    }\r\n\r\n    return () => {\r\n      if (\"close\" in socket) {\r\n        console.log(\"closing socket\");\r\n        socket.close();\r\n      }\r\n    };\r\n  }, [userInfo.token]);\r\n\r\n  useEffect(() => {\r\n    // console.log(\"fetching user info \");\r\n    dispatch(fetchUserInfo());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (userInfo.token) dispatch(GeneralUpdate());\r\n    return () => {\r\n      // console.log(\"app unmounting\");\r\n      setSocket({});\r\n    };\r\n  }, [userInfo.token]);\r\n\r\n  useEffect(() => {\r\n    if (currentChat) {\r\n      if (userInfo.token) {\r\n        // used for setting chat info just before sending a new message to create a new chat\r\n        if (Object.keys(currentChat).find((key) => key === \"newChatMembers\")) {\r\n          let members = [...currentChat.newChatMembers];\r\n          dispatch(statusActions.setChatHistory({ members }));\r\n          return;\r\n        }\r\n\r\n        fetch(http_url + \"/chat_app/chat_update/\" + currentChat, {\r\n          headers: { authorization: \"token \" + userInfo.token },\r\n        })\r\n          .then((response) => {\r\n            if (response.ok) return response.json();\r\n            else {\r\n              history.replace(\"/\");\r\n            }\r\n          })\r\n          .then((data) => dispatch(statusActions.setChatHistory(data)))\r\n          .catch((error) => console.error(error));\r\n      }\r\n    } else dispatch(statusActions.setChatHistory(null));\r\n  }, [currentChat, userInfo]);\r\n\r\n  useEffect(() => {\r\n    // let data;\r\n    // console.log(\"socket is \", socket);\r\n    if (socket.url) {\r\n      // console.log(socket);\r\n\r\n      socket.onopen = () => {\r\n        console.log(\"connected to websocket\");\r\n      };\r\n\r\n      socket.onmessage = (e) => {\r\n        console.log(\"onmessage via websocket\");\r\n        const data = JSON.parse(e.data);\r\n        console.log(data);\r\n\r\n        // if (Object.keys(data).find((key) => key === \"newChat\")) {\r\n        // }\r\n        if (data.newChat && data.room) {\r\n          dispatch(statusActions.addChat(data.room));\r\n          console.log(\"new room added\", data.room);\r\n          if (data.sender === userInfo?.username)\r\n            history.replace(`room/${data.room.id}`);\r\n          // else console.log(\"the user is not the sender\");\r\n        } else if (data.message.room_id == currentChat && chatHistory) {\r\n          dispatch(\r\n            statusActions.setChatHistory({\r\n              ...chatHistory,\r\n              messages: [...chatHistory.messages, data.message],\r\n            })\r\n          );\r\n          console.log(\"new message appended\");\r\n        }\r\n      };\r\n    }\r\n    // return () => {\r\n    //   console.log(\"resetting socket onopen and onmessage\");\r\n    //   socket.onopen = () => null;\r\n    //   socket.onmessage = () => null;\r\n    // };\r\n  }, [socket.url, currentChat, chatHistory, chats, userInfo]);\r\n  // [socket.url, currentChat, chatHistory, chats, userInfo]\r\n\r\n  function onClickFriend(user) {\r\n    let chat_id = chats?.find(\r\n      (chat) =>\r\n        chat.members.length === 2 &&\r\n        chat.members.find((member) => member === user)\r\n    )?.id;\r\n\r\n    if (chat_id) {\r\n      history.push(`/room/${chat_id}`);\r\n    } else {\r\n      console.log(\"redirect\", chat_id);\r\n      history.push(`/newchat?section=send_message&members=${user}`);\r\n      // history.replace({\r\n      //   pathname: \"/newchat\",\r\n      //   state: { user },\r\n      // });\r\n    }\r\n  }\r\n\r\n  if (userInfo.isLoading) {\r\n    return <Spinner />;\r\n  } else if (!userInfo.token) {\r\n    return (\r\n      <>\r\n        <Route path=\"/login\">\r\n          <Login userInfo={null} />\r\n        </Route>\r\n        <Route path=\"/register\">\r\n          <Registration userInfo={null} />\r\n        </Route>\r\n        <Route path=\"/\">\r\n          <Redirect to=\"/login\" />\r\n        </Route>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* <Spinner /> */}\r\n      <Main mobileViewSide={\"left\"} onClickFriend={onClickFriend} />\r\n      <Route exact path=\"/\">\r\n        {userInfo.token ? (\r\n          <ChatWindow mobileViewSide={\"left\"} />\r\n        ) : (\r\n          // <div className=\"right empty HideIfMobile\">\r\n          //   There are no messages to display. Please select a chat to display\r\n          //   messages.\r\n          // </div>\r\n          <Redirect to=\"/login\" />\r\n        )}\r\n      </Route>\r\n      <Route path=\"/room/:room_id\">\r\n        <ChatWindow\r\n          // chatTitle={GetChatTitle(currentChat, chats, userInfo)}\r\n          socket={socket}\r\n          mobileViewSide={\"right\"}\r\n        />\r\n      </Route>\r\n      <Route path=\"/newchat\">\r\n        <NewChat\r\n          socket={socket}\r\n          onClickFriend={onClickFriend}\r\n          mobileViewSide={\"right\"}\r\n        />\r\n      </Route>\r\n      <Route path=\"/addfriend\">\r\n        <AddFriend mobileViewSide={\"right\"} />\r\n      </Route>\r\n      <Route path=\"/login\">\r\n        <Login loggedIn={true} />\r\n      </Route>\r\n      <Route path=\"/register\">\r\n        <Registration loggedIn={true} />\r\n      </Route>\r\n    </>\r\n  );\r\n}\r\n","import { userInfoActions } from \"./userInfo-slice\";\r\nimport { statusActions } from \"./status-slice\";\r\nimport { http_url, ws_url } from \"../others/shared_vars\";\r\nimport store from \"./index\";\r\n\r\nexport const fetchUserInfo = () => {\r\n  return async (dispatch) => {\r\n    if (typeof Storage === \"undefined\") {\r\n      console.log(\"storage undefined\");\r\n      dispatch(\r\n        userInfoActions.setUserInfo({\r\n          username: null,\r\n          token: null,\r\n          isLoading: false,\r\n        })\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (!localStorage.ChatUserInfo) {\r\n      console.log(\"localStorage.ChatUserInfo is undefined\");\r\n      dispatch(\r\n        userInfoActions.setUserInfo({\r\n          username: null,\r\n          token: null,\r\n          isLoading: false,\r\n        })\r\n      );\r\n    }\r\n\r\n    const fetchData = async (storedInfo) => {\r\n      console.log(\"stored info\", storedInfo);\r\n      const response = await fetch(http_url + \"/chat_app/user_check\", {\r\n        method: \"GET\",\r\n        headers: { Authorization: \"token \" + storedInfo.token },\r\n      });\r\n      if (!response.ok) {\r\n        throw new Error(\"Could not fetch user info!\");\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      if (!data.username) {\r\n        throw new Error(\"user check failed\");\r\n      }\r\n\r\n      return data;\r\n    };\r\n\r\n    const storedInfo = JSON.parse(localStorage.ChatUserInfo);\r\n\r\n    try {\r\n      const userData = await fetchData(storedInfo);\r\n      console.log(\"userData\", userData);\r\n      dispatch(\r\n        userInfoActions.setUserInfo({\r\n          username: userData.username,\r\n          token: storedInfo.token,\r\n          isLoading: false,\r\n        })\r\n      );\r\n    } catch (error) {\r\n      console.error(error.message, \"fetchUserInfo failed\");\r\n\r\n      dispatch(\r\n        userInfoActions.setUserInfo({\r\n          username: null,\r\n          token: null,\r\n          isLoading: false,\r\n        })\r\n      );\r\n    }\r\n  };\r\n};\r\n\r\nexport const GeneralUpdate = () => {\r\n  return async (dispatch) => {\r\n    const state = store.getState();\r\n    console.log(\"general update state\", state);\r\n    const fetchData = async () => {\r\n      const response = await fetch(http_url + \"/chat_app/general_update\", {\r\n        method: \"GET\",\r\n        headers: { Authorization: \"token \" + state.userInfo.token },\r\n      });\r\n\r\n      if (!response.ok) throw new Error(\"GeneralUpdate failed\");\r\n\r\n      const data = await response.json();\r\n      return data;\r\n    };\r\n\r\n    try {\r\n      console.log(\"\\n\\n\\n general update \\n\\n\\n\");\r\n      const data = await fetchData();\r\n      console.log(data.rooms);\r\n      console.log(data.friends);\r\n      dispatch(\r\n        statusActions.setChats({\r\n          chats: data.rooms,\r\n        })\r\n      );\r\n      dispatch(\r\n        statusActions.setFriends({\r\n          friends: data.friends,\r\n        })\r\n      );\r\n    } catch (error) {\r\n      console.error(error.message, \"GeneralUpdate failed\");\r\n    }\r\n  };\r\n};\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport { BrowserRouter as Router, Switch, HashRouter } from \"react-router-dom\";\r\nimport store from \"./store/index.js\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <HashRouter>\r\n      <Provider store={store}>\r\n        <div className=\"App\">\r\n          <Switch>\r\n            <App />\r\n          </Switch>\r\n        </div>\r\n      </Provider>\r\n    </HashRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}